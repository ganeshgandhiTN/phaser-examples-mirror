<!DOCTYPE html>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<link href="../css/site.css" rel="stylesheet" />
<link href="../css/rouge.css" rel="stylesheet" />
<title>box2d/car on terrain &ndash; Phaser Examples</title>
<div id="phaser-example"></div>
<div class="controls">
  <button id="fullscreen">Full Screen</button> <button id="restart">Restart</button> <label for="scaleMode">scale:</label> <select id="scaleMode">
    <option value="0">
      Exact Fit
    </option>
    <option selected value="1">
      No Scale
    </option>
    <option value="2">
      Show All
    </option>
    <option value="3">
      Resize
    </option>
    <option value="4">
      User Scale
    </option>
  </select> <label for="userScale">user scale:</label><select id="userScale">
    <option>
      0.25
    </option>
    <option>
      0.5
    </option>
    <option>
      0.75
    </option>
    <option selected>
      1
    </option>
    <option>
      2
    </option>
  </select> <label for="rendering">rendering:</label> <select id="rendering">
    <option>
      auto
    </option>
    <option>
      crisp-edges
    </option>
    <option>
      pixelated
    </option>
  </select> <label title="Enlarge the game container (on larger displays)"><input id="bigger" type="checkbox">Bigger</label>
</div>
<h1>
  box2d/car on terrain
</h1>
<div class="sourcelinks">
  <a href="../js/node_modules/phaser-examples/examples/box2d/car%20on%20terrain.js" title="box2d/car on terrain.js">source</a> â€¢ <a href="../js/node_modules/phaser-examples/examples/box2d/car%20on%20terrain.js" download="" title="Download: box2d/car on terrain.js" type="application/javascript">download</a>
</div><pre class="highlight javascript"><code>
<span class="kd">var</span> <span class="nx">game</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Game</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">CANVAS</span><span class="p">,</span> <span class="s1">'phaser-example'</span><span class="p">,</span> <span class="p">{</span> <span class="na">create</span><span class="p">:</span> <span class="nx">create</span><span class="p">,</span> <span class="na">update</span><span class="p">:</span> <span class="nx">update</span><span class="p">,</span> <span class="na">render</span><span class="p">:</span> <span class="nx">render</span> <span class="p">});</span>

<span class="kd">var</span> <span class="nx">groundVertices</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">200</span><span class="p">,</span><span class="o">-</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">130.128</span><span class="p">,</span><span class="mf">5.08323</span><span class="p">,</span><span class="o">-</span><span class="mf">89.0526</span><span class="p">,</span><span class="o">-</span><span class="mf">0.105309</span><span class="p">,</span><span class="o">-</span><span class="mf">31.5464</span><span class="p">,</span><span class="mf">1.19183</span><span class="p">,</span><span class="mf">1.31426</span><span class="p">,</span><span class="mf">5.5156</span><span class="p">,</span>
<span class="mf">50.6053</span><span class="p">,</span><span class="mf">4.21846</span><span class="p">,</span><span class="mf">87.7897</span><span class="p">,</span><span class="o">-</span><span class="mf">2.26719</span><span class="p">,</span><span class="mf">148.755</span><span class="p">,</span><span class="o">-</span><span class="mf">4.42908</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="o">-</span><span class="mi">0</span><span class="p">,</span><span class="mf">251.899</span><span class="p">,</span><span class="mf">4.99306</span><span class="p">,</span>
<span class="mf">289.063</span><span class="p">,</span><span class="mf">13.0285</span><span class="p">,</span><span class="mf">335.267</span><span class="p">,</span><span class="mf">18.0508</span><span class="p">,</span><span class="mf">369.418</span><span class="p">,</span><span class="mf">9.01079</span><span class="p">,</span><span class="mf">383.48</span><span class="p">,</span><span class="mf">14.033</span><span class="p">,</span><span class="mf">410.6</span><span class="p">,</span><span class="mf">3.9886</span><span class="p">,</span>
<span class="mf">433.702</span><span class="p">,</span><span class="mf">2.98414</span><span class="p">,</span><span class="mf">467.853</span><span class="p">,</span><span class="mf">10.0152</span><span class="p">,</span><span class="mf">487.942</span><span class="p">,</span><span class="mf">20.0596</span><span class="p">,</span><span class="mf">512.048</span><span class="p">,</span><span class="mf">23.073</span><span class="p">,</span><span class="mf">545.195</span><span class="p">,</span><span class="mf">8.00633</span><span class="p">,</span>
<span class="mf">571.31</span><span class="p">,</span><span class="mf">1.97973</span><span class="p">,</span><span class="mf">591.399</span><span class="p">,</span><span class="o">-</span><span class="mf">16.1001</span><span class="p">,</span><span class="mf">623.541</span><span class="p">,</span><span class="o">-</span><span class="mf">24.1356</span><span class="p">,</span><span class="mf">647.647</span><span class="p">,</span><span class="o">-</span><span class="mf">20.1179</span><span class="p">,</span><span class="mf">678.785</span><span class="p">,</span><span class="o">-</span><span class="mf">22.1268</span><span class="p">,</span>
<span class="mf">695.86</span><span class="p">,</span><span class="o">-</span><span class="mf">35.1845</span><span class="p">,</span><span class="mf">743.069</span><span class="p">,</span><span class="o">-</span><span class="mf">44.2244</span><span class="p">,</span><span class="mf">776.215</span><span class="p">,</span><span class="o">-</span><span class="mf">40.2067</span><span class="p">,</span><span class="mf">820.41</span><span class="p">,</span><span class="o">-</span><span class="mf">25.14</span><span class="p">,</span><span class="mf">870.632</span><span class="p">,</span><span class="o">-</span><span class="mf">22.1268</span><span class="p">,</span>
<span class="mf">912.819</span><span class="p">,</span><span class="o">-</span><span class="mf">37.1933</span><span class="p">,</span><span class="mf">934.961</span><span class="p">,</span><span class="o">-</span><span class="mf">44.1016</span><span class="p">,</span><span class="mf">954.92</span><span class="p">,</span><span class="o">-</span><span class="mf">38.8491</span><span class="p">,</span><span class="mf">974.88</span><span class="p">,</span><span class="o">-</span><span class="mf">45.152</span><span class="p">,</span><span class="mf">996.94</span><span class="p">,</span><span class="o">-</span><span class="mf">39.8996</span><span class="p">,</span>
<span class="mf">1037.91</span><span class="p">,</span><span class="o">-</span><span class="mf">49.354</span><span class="p">,</span><span class="mf">1059.97</span><span class="p">,</span><span class="o">-</span><span class="mf">63.0105</span><span class="p">,</span><span class="mf">1086.23</span><span class="p">,</span><span class="o">-</span><span class="mf">84.0204</span><span class="p">,</span><span class="mf">1115.65</span><span class="p">,</span><span class="o">-</span><span class="mf">85.0708</span><span class="p">,</span><span class="mf">1153.46</span><span class="p">,</span><span class="o">-</span><span class="mf">72.4649</span><span class="p">,</span>
<span class="mf">1193.38</span><span class="p">,</span><span class="o">-</span><span class="mf">77.7174</span><span class="p">,</span><span class="mi">1227</span><span class="p">,</span><span class="o">-</span><span class="mf">91.3739</span><span class="p">,</span><span class="mf">1252.21</span><span class="p">,</span><span class="o">-</span><span class="mf">110.283</span><span class="p">,</span><span class="mf">1277.42</span><span class="p">,</span><span class="o">-</span><span class="mf">108.182</span><span class="p">,</span><span class="mf">1281.62</span><span class="p">,</span><span class="o">-</span><span class="mf">127.091</span><span class="p">,</span>
<span class="mf">1306.84</span><span class="p">,</span><span class="o">-</span><span class="mf">141.103</span><span class="p">,</span><span class="mi">1331</span><span class="p">,</span><span class="o">-</span><span class="mf">144.255</span><span class="p">,</span><span class="mf">1355.16</span><span class="p">,</span><span class="o">-</span><span class="mf">155.81</span><span class="p">,</span><span class="mf">1401.38</span><span class="p">,</span><span class="o">-</span><span class="mf">175.77</span><span class="p">,</span><span class="mf">1441.66</span><span class="p">,</span><span class="o">-</span><span class="mf">173.359</span><span class="p">,</span>
<span class="mf">1505.38</span><span class="p">,</span><span class="o">-</span><span class="mf">153.709</span><span class="p">,</span><span class="mf">1566.27</span><span class="p">,</span><span class="o">-</span><span class="mf">143.124</span><span class="p">,</span><span class="mf">1604.33</span><span class="p">,</span><span class="o">-</span><span class="mf">141.244</span><span class="p">,</span><span class="mf">1653.27</span><span class="p">,</span><span class="o">-</span><span class="mf">154.234</span><span class="p">,</span><span class="mf">1687.75</span><span class="p">,</span><span class="o">-</span><span class="mf">141.272</span><span class="p">,</span>
<span class="mf">1715.01</span><span class="p">,</span><span class="o">-</span><span class="mf">112.084</span><span class="p">,</span><span class="mf">1743.6</span><span class="p">,</span><span class="o">-</span><span class="mf">57.5053</span><span class="p">,</span><span class="mf">1764.91</span><span class="p">,</span><span class="o">-</span><span class="mf">35.513</span><span class="p">,</span><span class="mf">1783.52</span><span class="p">,</span><span class="o">-</span><span class="mf">43.7838</span><span class="p">,</span><span class="mf">1804.2</span><span class="p">,</span><span class="o">-</span><span class="mf">96.8544</span><span class="p">,</span>
<span class="mf">1805.57</span><span class="p">,</span><span class="o">-</span><span class="mf">132.694</span><span class="p">,</span><span class="mf">1812.47</span><span class="p">,</span><span class="o">-</span><span class="mf">142.344</span><span class="p">,</span><span class="mf">1873.12</span><span class="p">,</span><span class="o">-</span><span class="mf">149.236</span><span class="p">,</span><span class="mf">1931.01</span><span class="p">,</span><span class="o">-</span><span class="mf">140.965</span><span class="p">,</span><span class="mf">2023.37</span><span class="p">,</span><span class="o">-</span><span class="mf">126.491</span><span class="p">,</span>
<span class="mf">2066.1</span><span class="p">,</span><span class="o">-</span><span class="mf">143.722</span><span class="p">,</span><span class="mf">2088.85</span><span class="p">,</span><span class="o">-</span><span class="mf">166.467</span><span class="p">,</span><span class="mf">2102.63</span><span class="p">,</span><span class="o">-</span><span class="mf">189.901</span><span class="p">,</span><span class="mf">2130.89</span><span class="p">,</span><span class="o">-</span><span class="mf">204.374</span><span class="p">,</span><span class="mf">2168.8</span><span class="p">,</span><span class="o">-</span><span class="mf">207.82</span><span class="p">,</span>
<span class="mf">2234.96</span><span class="p">,</span><span class="o">-</span><span class="mf">205.064</span><span class="p">,</span><span class="mf">2261.58</span><span class="p">,</span><span class="o">-</span><span class="mf">191.522</span><span class="p">,</span><span class="mf">2286.18</span><span class="p">,</span><span class="o">-</span><span class="mf">163.977</span><span class="p">,</span><span class="mf">2316.62</span><span class="p">,</span><span class="o">-</span><span class="mf">117.978</span><span class="p">,</span><span class="mf">2340.88</span><span class="p">,</span><span class="o">-</span><span class="mf">82.6962</span><span class="p">,</span>
<span class="mf">2383.71</span><span class="p">,</span><span class="o">-</span><span class="mf">55.007</span><span class="p">,</span><span class="mf">2437.38</span><span class="p">,</span><span class="o">-</span><span class="mf">41.609</span><span class="p">,</span><span class="mf">2483.31</span><span class="p">,</span><span class="o">-</span><span class="mf">37.5896</span><span class="p">,</span><span class="mf">2507.01</span><span class="p">,</span><span class="o">-</span><span class="mf">40.8224</span><span class="p">,</span><span class="mf">2535.75</span><span class="p">,</span><span class="o">-</span><span class="mf">46.8021</span><span class="p">,</span>
<span class="mf">2553.06</span><span class="p">,</span><span class="o">-</span><span class="mf">51.5425</span><span class="p">,</span><span class="mf">2588.75</span><span class="p">,</span><span class="o">-</span><span class="mf">80.737</span><span class="p">,</span><span class="mf">2609.11</span><span class="p">,</span><span class="o">-</span><span class="mf">94.0372</span><span class="p">,</span><span class="mf">2626.65</span><span class="p">,</span><span class="o">-</span><span class="mf">113.754</span><span class="p">,</span><span class="mf">2646.7</span><span class="p">,</span><span class="o">-</span><span class="mf">132.646</span><span class="p">,</span>
<span class="mf">2671.69</span><span class="p">,</span><span class="o">-</span><span class="mf">154.192</span><span class="p">,</span><span class="mf">2686.72</span><span class="p">,</span><span class="o">-</span><span class="mf">164.424</span><span class="p">,</span><span class="mf">2714.27</span><span class="p">,</span><span class="o">-</span><span class="mf">175.401</span><span class="p">,</span><span class="mf">2758.47</span><span class="p">,</span><span class="o">-</span><span class="mf">179.97</span><span class="p">,</span><span class="mf">2952.34</span><span class="p">,</span><span class="o">-</span><span class="mf">178.248</span><span class="p">,</span>
<span class="mf">2952.34</span><span class="p">,</span><span class="o">-</span><span class="mf">205.573</span><span class="p">,</span><span class="mf">3064.31</span><span class="p">,</span><span class="o">-</span><span class="mf">204.906</span><span class="p">,</span><span class="mf">3099.63</span><span class="p">,</span><span class="o">-</span><span class="mf">189.578</span><span class="p">,</span><span class="mf">3177.37</span><span class="p">,</span><span class="o">-</span><span class="mf">190.754</span><span class="p">,</span><span class="mf">3184.57</span><span class="p">,</span><span class="o">-</span><span class="mf">214.917</span><span class="p">,</span>
<span class="mf">3274.26</span><span class="p">,</span><span class="o">-</span><span class="mf">203.48</span><span class="p">,</span><span class="mf">3324.75</span><span class="p">,</span><span class="o">-</span><span class="mf">185.774</span><span class="p">,</span><span class="mf">3421.53</span><span class="p">,</span><span class="o">-</span><span class="mf">169.584</span><span class="p">,</span><span class="mf">3484.18</span><span class="p">,</span><span class="o">-</span><span class="mf">159.587</span><span class="p">,</span><span class="mf">3559.48</span><span class="p">,</span><span class="o">-</span><span class="mf">158.92</span><span class="p">,</span>
<span class="mf">3613.47</span><span class="p">,</span><span class="o">-</span><span class="mf">168.251</span><span class="p">,</span><span class="mf">3646.79</span><span class="p">,</span><span class="o">-</span><span class="mf">173.582</span><span class="p">,</span><span class="mf">3681.45</span><span class="p">,</span><span class="o">-</span><span class="mf">168.917</span><span class="p">,</span><span class="mf">3695.73</span><span class="p">,</span><span class="o">-</span><span class="mf">99.6964</span><span class="p">,</span><span class="mf">3712.15</span><span class="p">,</span><span class="mf">75.9802</span><span class="p">,</span>
<span class="mf">3777.14</span><span class="p">,</span><span class="mf">211.665</span><span class="p">,</span><span class="mf">3829.27</span><span class="p">,</span><span class="mf">115.972</span><span class="p">,</span><span class="mf">3882.12</span><span class="p">,</span><span class="mf">285.935</span><span class="p">,</span><span class="mf">3908.54</span><span class="p">,</span><span class="mf">203.096</span><span class="p">,</span><span class="mf">3963.53</span><span class="p">,</span><span class="mf">283.793</span><span class="p">,</span>
<span class="mf">3989.95</span><span class="p">,</span><span class="mf">55.2703</span><span class="p">,</span><span class="mf">4049.94</span><span class="p">,</span><span class="mf">183.814</span><span class="p">,</span><span class="mf">4079.22</span><span class="p">,</span><span class="o">-</span><span class="mf">4.00267</span><span class="p">,</span><span class="mf">4092.79</span><span class="p">,</span><span class="o">-</span><span class="mf">32.5679</span><span class="p">,</span><span class="mf">4113.5</span><span class="p">,</span><span class="o">-</span><span class="mf">41.1375</span><span class="p">,</span>
<span class="mf">4167.77</span><span class="p">,</span><span class="o">-</span><span class="mf">36.1386</span><span class="p">,</span><span class="mf">4262.75</span><span class="p">,</span><span class="o">-</span><span class="mf">9.0016</span><span class="p">,</span><span class="mf">4372.57</span><span class="p">,</span><span class="mf">29.6882</span><span class="p">,</span><span class="mf">4504.22</span><span class="p">,</span><span class="mf">43.4773</span><span class="p">,</span><span class="mf">4649.69</span><span class="p">,</span><span class="mf">49.6867</span><span class="p">,</span>
<span class="mf">4674.48</span><span class="p">,</span><span class="mf">29.5702</span><span class="p">,</span><span class="mf">4713.99</span><span class="p">,</span><span class="mf">14.847</span><span class="p">,</span><span class="mf">4760.58</span><span class="p">,</span><span class="mf">14.6627</span><span class="p">,</span><span class="mf">4803.11</span><span class="p">,</span><span class="mf">38.8688</span><span class="p">,</span><span class="mf">4819.84</span><span class="p">,</span><span class="mf">15.0291</span><span class="p">,</span>
<span class="mf">4858.19</span><span class="p">,</span><span class="o">-</span><span class="mf">1.45256</span><span class="p">,</span><span class="mf">4896.91</span><span class="p">,</span><span class="mf">5.9419</span><span class="p">,</span><span class="mf">4925.06</span><span class="p">,</span><span class="mf">31.9846</span><span class="p">,</span><span class="mf">4960.49</span><span class="p">,</span><span class="mf">17.0905</span><span class="p">,</span><span class="mf">5006.14</span><span class="p">,</span><span class="mf">15.8518</span><span class="p">,</span>
<span class="mf">5050.86</span><span class="p">,</span><span class="mf">24.3401</span><span class="p">,</span><span class="mf">5078.48</span><span class="p">,</span><span class="mf">41.8191</span><span class="p">,</span><span class="mf">5498.61</span><span class="p">,</span><span class="mf">41.7032</span><span class="p">,</span><span class="mf">5499.5</span><span class="p">,</span><span class="o">-</span><span class="mf">306.024</span><span class="p">];</span>

<span class="kd">var</span> <span class="nx">truckVertices</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.941074</span><span class="p">,</span><span class="o">-</span><span class="mf">7.13798</span><span class="p">,</span><span class="o">-</span><span class="mf">69.9798</span><span class="p">,</span><span class="o">-</span><span class="mf">7.91197</span><span class="p">,</span><span class="o">-</span><span class="mf">73.1929</span><span class="p">,</span><span class="mf">8.39935</span><span class="p">,</span><span class="o">-</span><span class="mf">68.3795</span><span class="p">,</span><span class="mf">12.8165</span><span class="p">,</span><span class="o">-</span><span class="mf">57.3861</span><span class="p">,</span><span class="mf">13.1711</span><span class="p">,</span>
<span class="o">-</span><span class="mf">48.8751</span><span class="p">,</span><span class="mf">3.47799</span><span class="p">,</span><span class="o">-</span><span class="mf">35.3993</span><span class="p">,</span><span class="mf">2.53232</span><span class="p">,</span><span class="o">-</span><span class="mf">23.1057</span><span class="p">,</span><span class="mf">14.7078</span><span class="p">,</span><span class="mf">34.2254</span><span class="p">,</span><span class="mf">15.6535</span><span class="p">,</span><span class="mf">45.2188</span><span class="p">,</span><span class="mf">3.8326</span><span class="p">,</span>
<span class="mf">59.8766</span><span class="p">,</span><span class="mf">3.8326</span><span class="p">,</span><span class="mf">67.2056</span><span class="p">,</span><span class="mf">10.2159</span><span class="p">,</span><span class="mf">71.7627</span><span class="p">,</span><span class="mf">9.80711</span><span class="p">,</span><span class="mf">72.9977</span><span class="p">,</span><span class="mf">1.35024</span><span class="p">,</span><span class="mf">69.3556</span><span class="p">,</span><span class="o">-</span><span class="mf">5.51562</span><span class="p">,</span>
<span class="mf">34.5293</span><span class="p">,</span><span class="o">-</span><span class="mf">7.36343</span><span class="p">,</span><span class="mf">21.802</span><span class="p">,</span><span class="o">-</span><span class="mf">21.4563</span><span class="p">,</span><span class="mf">1.15879</span><span class="p">,</span><span class="o">-</span><span class="mf">21.9506</span><span class="p">];</span>

<span class="kd">var</span> <span class="nx">truckBody</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">driveJoints</span> <span class="o">=</span> <span class="p">[];</span>

<span class="kd">function</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
	
	<span class="nx">game</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">setBounds</span><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">,</span> <span class="o">-</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">20000</span><span class="p">,</span> <span class="mi">20000</span><span class="p">);</span>
	
	<span class="nx">game</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">'#124184'</span><span class="p">;</span>

	<span class="c1">// Enable Box2D physics</span>
	<span class="nx">game</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">startSystem</span><span class="p">(</span><span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">BOX2D</span><span class="p">);</span>
	<span class="nx">game</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">box2d</span><span class="p">.</span><span class="nx">gravity</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
	<span class="nx">game</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">box2d</span><span class="p">.</span><span class="nx">friction</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">;</span>
	
	<span class="c1">// Make the ground body</span>
	<span class="kd">var</span> <span class="nx">groundBody</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Box2D</span><span class="p">.</span><span class="nx">Body</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">game</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="nx">groundBody</span><span class="p">.</span><span class="nx">setChain</span><span class="p">(</span><span class="nx">groundVertices</span><span class="p">);</span>
	
	<span class="kd">var</span> <span class="nx">PTM</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
	
	<span class="c1">// Make the truck body</span>
	<span class="nx">truckBody</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Box2D</span><span class="p">.</span><span class="nx">Body</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">game</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="nx">PTM</span><span class="p">);</span>
	<span class="nx">truckBody</span><span class="p">.</span><span class="nx">setPolygon</span><span class="p">(</span><span class="nx">truckVertices</span><span class="p">);</span>
		
	<span class="c1">// Make the wheel bodies</span>
	<span class="kd">var</span> <span class="nx">wheelBodies</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="nx">wheelBodies</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Box2D</span><span class="p">.</span><span class="nx">Body</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">game</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.82</span><span class="o">*</span><span class="nx">PTM</span><span class="p">,</span> <span class="mf">0.6</span><span class="o">*-</span><span class="nx">PTM</span><span class="p">);</span>
	<span class="nx">wheelBodies</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Phaser</span><span class="p">.</span><span class="nx">Physics</span><span class="p">.</span><span class="nx">Box2D</span><span class="p">.</span><span class="nx">Body</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">game</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span>  <span class="mf">1.05</span><span class="o">*</span><span class="nx">PTM</span><span class="p">,</span> <span class="mf">0.6</span><span class="o">*-</span><span class="nx">PTM</span><span class="p">);</span>
	<span class="nx">wheelBodies</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">setCircle</span><span class="p">(</span><span class="mf">0.3</span><span class="o">*</span><span class="nx">PTM</span><span class="p">);</span>
	<span class="nx">wheelBodies</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">setCircle</span><span class="p">(</span><span class="mf">0.3</span><span class="o">*</span><span class="nx">PTM</span><span class="p">);</span>
	
	<span class="kd">var</span> <span class="nx">frequency</span> <span class="o">=</span> <span class="mf">3.5</span><span class="p">;</span>
	<span class="kd">var</span> <span class="nx">damping</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>	
	<span class="kd">var</span> <span class="nx">motorTorque</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
	<span class="kd">var</span> <span class="nx">rideHeight</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
	
	<span class="c1">// Make wheel joints</span>
	<span class="c1">// bodyA, bodyB, ax, ay, bx, by, axisX, axisY, frequency, damping, motorSpeed, motorTorque, motorEnabled	</span>
	<span class="nx">driveJoints</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">box2d</span><span class="p">.</span><span class="nx">wheelJoint</span><span class="p">(</span><span class="nx">truckBody</span><span class="p">,</span> <span class="nx">wheelBodies</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="mf">0.82</span><span class="o">*</span><span class="nx">PTM</span><span class="p">,</span><span class="nx">rideHeight</span><span class="o">*</span><span class="nx">PTM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="nx">frequency</span><span class="p">,</span> <span class="nx">damping</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">motorTorque</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span> <span class="c1">// rear</span>
	<span class="nx">driveJoints</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">physics</span><span class="p">.</span><span class="nx">box2d</span><span class="p">.</span><span class="nx">wheelJoint</span><span class="p">(</span><span class="nx">truckBody</span><span class="p">,</span> <span class="nx">wheelBodies</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>  <span class="mf">1.05</span><span class="o">*</span><span class="nx">PTM</span><span class="p">,</span><span class="nx">rideHeight</span><span class="o">*</span><span class="nx">PTM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="nx">frequency</span><span class="p">,</span> <span class="nx">damping</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">motorTorque</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span> <span class="c1">// front</span>

	<span class="nx">cursors</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">keyboard</span><span class="p">.</span><span class="nx">createCursorKeys</span><span class="p">();</span>
	
	<span class="nx">game</span><span class="p">.</span><span class="nx">camera</span><span class="p">.</span><span class="nx">follow</span><span class="p">(</span><span class="nx">truckBody</span><span class="p">);</span>
	
	<span class="kd">var</span> <span class="nx">caption</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'Simple car control. Left/right arrow keys to move, down arrow key to brake.'</span><span class="p">,</span> <span class="p">{</span> <span class="na">fill</span><span class="p">:</span> <span class="s1">'#ffffff'</span><span class="p">,</span> <span class="na">font</span><span class="p">:</span> <span class="s1">'14pt Arial'</span> <span class="p">});</span>
	<span class="nx">caption</span><span class="p">.</span><span class="nx">fixedToCamera</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">update</span><span class="p">()</span> <span class="p">{</span>
	
	<span class="kd">var</span> <span class="nx">motorSpeed</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span> <span class="c1">// rad/s</span>
	<span class="kd">var</span> <span class="nx">motorEnabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
	
	<span class="k">if</span> <span class="p">(</span><span class="nx">cursors</span><span class="p">.</span><span class="nx">down</span><span class="p">.</span><span class="nx">isDown</span><span class="p">)</span> <span class="p">{</span> <span class="nx">motorSpeed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// prioritize braking</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">cursors</span><span class="p">.</span><span class="nx">left</span><span class="p">.</span><span class="nx">isDown</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">cursors</span><span class="p">.</span><span class="nx">right</span><span class="p">.</span><span class="nx">isDown</span><span class="p">)</span> <span class="p">{</span> <span class="nx">motorSpeed</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">cursors</span><span class="p">.</span><span class="nx">right</span><span class="p">.</span><span class="nx">isDown</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">cursors</span><span class="p">.</span><span class="nx">left</span><span class="p">.</span><span class="nx">isDown</span><span class="p">)</span> <span class="p">{</span>  <span class="p">}</span>
	<span class="k">else</span> <span class="p">{</span> <span class="nx">motorEnabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// roll if no keys pressed</span>
	
	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">driveJoints</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">EnableMotor</span><span class="p">(</span><span class="nx">motorEnabled</span><span class="p">);</span>
		<span class="nx">driveJoints</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">SetMotorSpeed</span><span class="p">(</span><span class="nx">motorSpeed</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>

	<span class="nx">game</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">box2dWorld</span><span class="p">();</span>

<span class="p">}</span>
</code></pre>
<meta content="../" name="loadPath">
<footer class="footer">
  <p><a href="https://github.com/samme/phaser-examples-mirror">phaser-examples-mirror</a> from <a href="https://github.com/photonstorm/phaser-examples">photonstorm/phaser-examples</a> (<a href="http://opensource.org/licenses/MIT">MIT License</a>).</p>
  
  <p>This license does <strong>not</strong> cover the graphics or audio files herein. None of them are to be used in commercial games.</p>
  
</footer>
<script>
  this.loadPath = "../";
</script>
<script src="../js/node_modules/phaser-ce/build/phaser.js" defer="defer"></script>
<script src="../js/node_modules/phaser-examples/examples/box2d/car%20on%20terrain.js" defer="defer"></script>
<script src="../js/example.js" defer="defer"></script>